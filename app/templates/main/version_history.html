{% extends "main/base.html" %}

{% block title %}Version History - PanelMerge{% endblock %}

{% block content %}
<div class="bg-white p-6 sm:p-8 rounded-xl shadow-2xl w-full max-w-4xl">
    <header class="mb-6 sm:mb-8 text-center">
        <h1 class="text-3xl sm:text-4xl font-bold text-sky-700">Version History</h1>
        <p class="text-gray-600 mt-2">
            Track the evolution of PanelMerge features and improvements.
        </p>
        <div class="mt-4">
            <a href="{{ url_for('main.index') }}" class="inline-flex items-center px-4 py-2 bg-sky-600 text-white rounded-lg hover:bg-sky-700 transition">
                ← Back to Main Page
            </a>
        </div>
    </header>

    <div class="space-y-6">
        <!-- Version 1.4.1 -->
        <div class="border-l-4 border-green-500 pl-4">
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-2">
                <h2 class="text-xl font-semibold text-green-700">Version 1.4.1</h2>
                <span class="text-sm text-gray-500">August 2025</span>
            </div>
            <p class="text-gray-600 text-sm mb-2 italic">Developer Tools & Timezone Enhanced</p>
            <ul class="text-gray-700 space-y-1 text-sm">
                <li>• <strong>Interactive API Documentation:</strong> Comprehensive Swagger/OpenAPI documentation with live testing capabilities</li>
                <li>• <strong>Unit Testing Framework:</strong> Complete pytest and unittest integration with automated testing for all core functionality</li>
                <li>• <strong>Enhanced Timezone Support:</strong> User timezone preferences with automatic detection and profile integration</li>
                <li>• <strong>Real-time Current Time Display:</strong> Live time updates in user's preferred timezone</li>
                <li>• <strong>Profile Page Enhancements:</strong> Integrated timezone management in user profile workflow</li>
                <li>• <strong>Bug Fixes:</strong> Fixed profile update audit logging and improved UI responsiveness</li>
                <li>• <strong>Documentation Updates:</strong> Comprehensive timezone system documentation and troubleshooting guides</li>
            </ul>
        </div>

        <!-- Version 1.4 -->
        <div class="border-l-4 border-red-500 pl-4">
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-2">
                <h2 class="text-xl font-semibold text-red-700">Version 1.4</h2>
                <span class="text-sm text-gray-500">July 2025</span>
            </div>
            <ul class="text-gray-700 space-y-1 text-sm">
                <li>• <strong>Admin Messages:</strong> Admin users can create messages that are shown on main page</li>
                <li>• <strong>Comprehensive Security Audit Logging:</strong> Enterprise-grade security monitoring with 33 audit action types</li>
                <li>• <strong>Automated Threat Detection:</strong> Real-time monitoring for SQL injection, path traversal, and brute force attacks</li>
                <li>• <strong>Security Violation Tracking:</strong> Detailed logging of security policy violations with severity levels</li>
                <li>• <strong>Enhanced Session Management:</strong> Individual session revocation and comprehensive session security with Redis storage</li>
                <li>• <strong>Data Encryption:</strong> Complete data encryption at rest and in transit with advanced encryption service</li>
                <li>• <strong>User Authentication System:</strong> Full user registration and authentication with role-based access control</li>
                <li>• <strong>Role-Based Access Control:</strong> Different permission levels (viewer, editor, admin) with privilege management</li>
                <li>• <strong>Panel Comparison Tool:</strong> Side-by-side comparison of multiple panels before selection</li>
                <li>• <strong>Panel Preview Feature:</strong> Quick gene count and summary without full selection</li>
                <li>• <strong>File Validation Preview:</strong> Show detailed validation results before upload with error reporting</li>
                <li>• <strong>Redis Caching System:</strong> Redis Cloud integration for better caching and session management</li>
                <li>• <strong>Gene Autocomplete Search:</strong> Intelligent autocomplete suggestions for gene names as user types</li>
                <li>• <strong>Complete Audit Trail:</strong> Comprehensive logging of user actions and data changes</li>
                <li>• <strong>Compliance Logging:</strong> GDPR and regulatory compliance event tracking</li>
                <li>• <strong>Risk Assessment System:</strong> Automated risk scoring for security events (0-100 scale)</li>
                <li>• <strong>Security Monitoring Dashboard:</strong> Real-time security monitoring with automated response</li>
                <li>• <strong>Behavioral Analysis:</strong> Anomaly detection for suspicious user behavior patterns</li>
                <li>• <strong>File Upload Security:</strong> Malicious content detection and file type validation</li>
                <li>• <strong>IP Blocking System:</strong> Automatic blocking of suspicious IP addresses with rate limiting</li>
                <li>• <strong>Security Event Management:</strong> Comprehensive security event tracking and alerting system</li>
            </ul>
        </div>

        <!-- Version 1.3 -->
        <div class="border-l-4 border-sky-500 pl-4">
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-2">
                <h2 class="text-xl font-semibold text-sky-700">Version 1.3</h2>
                <span class="text-sm text-gray-500">July 2025</span>
            </div>
            <ul class="text-gray-700 space-y-1 text-sm">
                <li>• <strong>Enhanced Gene Search:</strong> Search by gene name (e.g., "BRCA1") to find panels containing that gene</li>
                <li>• <strong>Flexible Upload Columns:</strong> Support for gene, genes, entity_name, genesymbol column names (case-insensitive)</li>
                <li>• <strong>Version History Page:</strong> Added comprehensive changelog and navigation</li>
                <li>• <strong>Header Navigation:</strong> Easy access to main features and version history</li>
                <li>• <strong>Improved Search UI:</strong> Updated instructions with clear examples and better placeholder text</li>
                <li>• <strong>New API Endpoint:</strong> /api/genes/{entity_name} for gene-based panel discovery</li>
                <li>• <strong>Database Flexibility:</strong> Optional database mode with WITHOUT_DB configuration</li>
                <li>• <strong>App Rebranding:</strong> Renamed from "Gene Panel Combine" to "PanelMerge"</li>
            </ul>
        </div>

        <!-- Version 1.2 -->
        <div class="border-l-4 border-green-500 pl-4">
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-2">
                <h2 class="text-xl font-semibold text-green-700">Version 1.2</h2>
                <span class="text-sm text-gray-500">July 2025</span>
            </div>
            <ul class="text-gray-700 space-y-1 text-sm">
                <li>• Added comprehensive user panel upload functionality (Excel, CSV, TSV)</li>
                <li>• Implemented drag-and-drop file upload interface</li>
                <li>• Multiple file upload support with duplicate prevention</li>
                <li>• User panels appear as separate sheets in Excel output</li>
                <li>• Combined list now shows source panel names including user uploads</li>
                <li>• Session-based panel management with add/remove capabilities</li>
            </ul>
        </div>

        <!-- Version 1.1 -->
        <div class="border-l-4 border-yellow-500 pl-4">
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-2">
                <h2 class="text-xl font-semibold text-yellow-700">Version 1.1</h2>
                <span class="text-sm text-gray-500">June 2025</span>
            </div>
            <ul class="text-gray-700 space-y-1 text-sm">
                <li>• Added Australian PanelApp integration</li>
                <li>• Implemented tabbed interface for UK/Australia panel selection</li>
                <li>• Enhanced Excel output with source indicators (GB/AUS prefixes)</li>
                <li>• Improved caching with separate cache for each API source</li>
                <li>• Added visual indicators for panel source in dropdowns</li>
            </ul>
        </div>

        <!-- Version 1.0 -->
        <div class="border-l-4 border-blue-500 pl-4">
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-2">
                <h2 class="text-xl font-semibold text-blue-700">Version 1.0</h2>
                <span class="text-sm text-gray-500">May 2025</span>
            </div>
            <ul class="text-gray-700 space-y-1 text-sm">
                <li>• Initial release with UK PanelApp integration</li>
                <li>• Panel search and filtering by name, disease group, description</li>
                <li>• Gene confidence level filtering (Green, Amber, Red)</li>
                <li>• Excel file generation with combined gene lists</li>
                <li>• Admin dashboard with user management and download tracking</li>
                <li>• Responsive design with Tailwind CSS</li>
                <li>• Rate limiting and caching for optimal performance</li>
            </ul>
        </div>
    </div>

    <div class="mt-8 p-4 bg-gray-50 rounded-lg">
        <h3 class="text-lg font-semibold text-gray-700 mb-2">Technical Stack</h3>
        <div class="text-sm text-gray-600 space-y-1">
            <p><strong>Backend:</strong> Python, Flask, SQLAlchemy, Pandas, Redis</p>
            <p><strong>Frontend:</strong> JavaScript, Tailwind CSS, Bootstrap (admin)</p>
            <p><strong>Security:</strong> Enterprise encryption, audit logging, threat detection, session management</p>
            <p><strong>APIs:</strong> Genomics England PanelApp, PanelApp Australia</p>
            <p><strong>Database:</strong> PostgreSQL (production), SQLite (local), Redis (caching/sessions)</p>
            <p><strong>Deployment:</strong> Google Cloud Platform with Cloud SQL</p>
        </div>
    </div>
</div>
{% endblock %}
